<!DOCTYPE html>
<html lang="zh-hant-tw">
  <head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>
    <title>testnotify</title>
    <link rel="stylesheet" href="/css/normalize.css"/>
    <link rel="stylesheet" href="/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/style.css"/>
    <script defer="defer" src="https://use.fontawesome.com/releases/v5.0.1/js/all.js"></script>
  </head>
  <body>
    <div class="container">
      <div class="form-group">
        <label>標題</label>
        <input class="form-control" type="text"/>
      </div>
      <div class="form-group">
        <label>內文</label>
        <input class="form-control" type="text"/>
      </div><a class="btn btn-primary" id="notify" href="#">設定</a>
    </div>
  </body>
  <script src="/javascripts/jquery-3.1.1.min.js"></script>
  <script src="/javascripts/bootstrap.min.js"></script>
  <script>
    var enableNotifications = document.querySelectorAll('#notify');
    if ('Notification' in window) {
      for (var i= 0; i < enableNotifications.length; i++) {
        enableNotifications[i].style.display = 'inline-block';
        enableNotifications[i].addEventListener('click', askForNotificationPermission);
      }
    }
    function displayNotification(){
      new Notification('訂閱成功！！！');
    }
    function askForNotificationPermission() {
      Notification.requestPermission(function(status){
        console.log('User Choice', status);
        if (status !== 'granted') {
          console.log('推播允許被拒絕了!');
        } else {
          displayNotification();
        }
      });
    }
  </script>
</html>